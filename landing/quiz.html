<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GATO â€” Discover Your Cosmic Style</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #0a0a1a;
      color: #e0e0e0;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Progress bar */
    .progress-bar {
      position: fixed;
      top: 0; left: 0;
      height: 3px;
      background: linear-gradient(90deg, #8b5cf6, #c4b5fd);
      transition: width 0.4s ease;
      z-index: 100;
    }

    /* Slide container */
    .quiz-wrap {
      position: relative;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .slide {
      position: absolute;
      width: 100%;
      max-width: 520px;
      padding: 40px 24px;
      opacity: 0;
      transform: translateX(60px);
      transition: opacity 0.4s ease, transform 0.4s ease;
      pointer-events: none;
    }
    .slide.active {
      opacity: 1;
      transform: translateX(0);
      pointer-events: all;
      position: relative;
    }
    .slide.exit-left {
      opacity: 0;
      transform: translateX(-60px);
    }

    /* Typography */
    .slide-number {
      color: #8b5cf6;
      font-size: 0.8em;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 12px;
    }
    h2 {
      font-size: 1.5em;
      font-weight: 600;
      margin-bottom: 8px;
      line-height: 1.3;
    }
    .slide-desc {
      color: #888;
      font-size: 0.95em;
      margin-bottom: 28px;
      line-height: 1.5;
    }

    /* Option cards */
    .options { display: flex; flex-direction: column; gap: 10px; }
    .option {
      display: flex;
      align-items: flex-start;
      gap: 14px;
      padding: 16px;
      background: rgba(139, 92, 246, 0.06);
      border: 1px solid rgba(139, 92, 246, 0.15);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s;
      user-select: none;
    }
    .option:hover {
      background: rgba(139, 92, 246, 0.12);
      border-color: rgba(139, 92, 246, 0.3);
    }
    .option.selected {
      background: rgba(139, 92, 246, 0.15);
      border-color: #8b5cf6;
    }
    .option-icon { font-size: 1.3em; flex-shrink: 0; margin-top: 2px; }
    .option-text { flex: 1; }
    .option-label { font-weight: 500; font-size: 0.95em; }
    .option-preview {
      color: #888;
      font-size: 0.82em;
      margin-top: 4px;
      line-height: 1.4;
      font-style: italic;
    }

    /* Multi-select */
    .multi-option {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      background: rgba(139, 92, 246, 0.06);
      border: 1px solid rgba(139, 92, 246, 0.15);
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 0.9em;
      user-select: none;
    }
    .multi-option:hover { background: rgba(139, 92, 246, 0.12); }
    .multi-option.selected {
      background: rgba(139, 92, 246, 0.2);
      border-color: #8b5cf6;
    }
    .multi-wrap { display: flex; flex-wrap: wrap; gap: 8px; }

    /* Inputs */
    .form-group { margin-bottom: 16px; }
    .form-group label {
      display: block;
      font-size: 0.85em;
      color: #999;
      margin-bottom: 6px;
    }
    .form-group input, .form-group select {
      width: 100%;
      padding: 12px 16px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(139, 92, 246, 0.2);
      border-radius: 10px;
      color: #e0e0e0;
      font-size: 1em;
      outline: none;
      transition: border-color 0.2s;
    }
    .form-group input:focus, .form-group select:focus {
      border-color: #8b5cf6;
    }
    .form-group input::placeholder { color: #555; }
    .form-row { display: flex; gap: 12px; }
    .form-row .form-group { flex: 1; }

    /* Buttons */
    .btn-next {
      display: inline-block;
      margin-top: 24px;
      padding: 14px 36px;
      background: linear-gradient(135deg, #8b5cf6, #6d28d9);
      color: #fff;
      border: none;
      border-radius: 24px;
      font-size: 1em;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, opacity 0.2s;
    }
    .btn-next:hover { transform: scale(1.03); }
    .btn-next:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }
    .btn-back {
      display: inline-block;
      margin-top: 12px;
      padding: 8px 0;
      background: none;
      border: none;
      color: #666;
      font-size: 0.85em;
      cursor: pointer;
    }
    .btn-back:hover { color: #999; }

    /* Paywall */
    .plan-cards { display: flex; gap: 12px; margin-top: 20px; }
    .plan-card {
      flex: 1;
      padding: 20px;
      border-radius: 14px;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
      position: relative;
    }
    .plan-free {
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.1);
    }
    .plan-premium {
      background: rgba(139, 92, 246, 0.1);
      border: 2px solid #8b5cf6;
    }
    .plan-card:hover { transform: translateY(-2px); }
    .plan-badge {
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      background: #8b5cf6;
      color: #fff;
      font-size: 0.7em;
      padding: 3px 12px;
      border-radius: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .plan-price {
      font-size: 1.8em;
      font-weight: 700;
      margin: 8px 0;
    }
    .plan-price small { font-size: 0.45em; color: #999; font-weight: 400; }
    .plan-period { color: #888; font-size: 0.8em; }
    .plan-features {
      text-align: left;
      margin-top: 16px;
      font-size: 0.85em;
      line-height: 1.8;
    }
    .plan-features .has { color: #c4b5fd; }
    .plan-features .no { color: #444; text-decoration: line-through; }

    /* Language toggle */
    .lang-toggle {
      position: fixed;
      top: 16px;
      right: 16px;
      z-index: 50;
      display: flex;
      gap: 4px;
      background: rgba(255,255,255,0.05);
      border-radius: 8px;
      padding: 3px;
    }
    .lang-btn {
      padding: 4px 10px;
      border: none;
      background: none;
      color: #666;
      font-size: 0.8em;
      cursor: pointer;
      border-radius: 6px;
      transition: all 0.2s;
    }
    .lang-btn.active {
      background: rgba(139, 92, 246, 0.2);
      color: #c4b5fd;
    }
  </style>
</head>
<body>
  <div class="progress-bar" id="progress"></div>

  <div class="lang-toggle">
    <button class="lang-btn active" onclick="setLang('en')">EN</button>
    <button class="lang-btn" onclick="setLang('lt')">LT</button>
  </div>

  <div class="quiz-wrap">
    <!-- Slide 1: Style -->
    <div class="slide active" data-slide="1">
      <div class="slide-number" data-i18n="step">Step 1 of 9</div>
      <h2 data-i18n="s1_title">How should your readings feel?</h2>
      <p class="slide-desc" data-i18n="s1_desc">Pick the voice that resonates with you.</p>
      <div class="options" data-field="style">
        <div class="option" data-value="mystic">
          <span class="option-icon">ğŸŒ™</span>
          <div class="option-text">
            <div class="option-label" data-i18n="s1_mystic">Mystic & poetic</div>
            <div class="option-preview" data-i18n="s1_mystic_ex">"The Moon whispers through your seventh house today, opening a door you thought was sealed..."</div>
          </div>
        </div>
        <div class="option" data-value="practical">
          <span class="option-icon">ğŸ”¬</span>
          <div class="option-text">
            <div class="option-label" data-i18n="s1_practical">Grounded & practical</div>
            <div class="option-preview" data-i18n="s1_practical_ex">"Mars trines your natal Jupiter â€” good day for big decisions. Trust your gut on career moves."</div>
          </div>
        </div>
        <div class="option" data-value="casual">
          <span class="option-icon">ğŸ’¬</span>
          <div class="option-text">
            <div class="option-label" data-i18n="s1_casual">Casual & friendly</div>
            <div class="option-preview" data-i18n="s1_casual_ex">"Hey! Venus is vibing with your chart today â€” perfect time to reach out to someone you've been thinking about."</div>
          </div>
        </div>
        <div class="option" data-value="direct">
          <span class="option-icon">ğŸ”¥</span>
          <div class="option-text">
            <div class="option-label" data-i18n="s1_direct">Direct & bold</div>
            <div class="option-preview" data-i18n="s1_direct_ex">"Saturn square your Sun. Stop procrastinating. That hard conversation? Have it today."</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Slide 2: Length -->
    <div class="slide" data-slide="2">
      <div class="slide-number" data-i18n="step2">Step 2 of 9</div>
      <h2 data-i18n="s2_title">How deep should we go?</h2>
      <p class="slide-desc" data-i18n="s2_desc">Pick your ideal reading length.</p>
      <div class="options" data-field="length">
        <div class="option" data-value="short">
          <span class="option-icon">â˜•</span>
          <div class="option-text">
            <div class="option-label" data-i18n="s2_short">Quick sip</div>
            <div class="option-preview" data-i18n="s2_short_ex">2â€“3 sentences. Just the cosmic headline.</div>
          </div>
        </div>
        <div class="option" data-value="medium">
          <span class="option-icon">ğŸ“–</span>
          <div class="option-text">
            <div class="option-label" data-i18n="s2_medium">Morning read</div>
            <div class="option-preview" data-i18n="s2_medium_ex">A solid paragraph with context and guidance.</div>
          </div>
        </div>
        <div class="option" data-value="long">
          <span class="option-icon">ğŸ”®</span>
          <div class="option-text">
            <div class="option-label" data-i18n="s2_long">Deep dive</div>
            <div class="option-preview" data-i18n="s2_long_ex">Detailed analysis with planetary aspects and actionable insight.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Slide 3: Life focus (multi-select) -->
    <div class="slide" data-slide="3">
      <div class="slide-number" data-i18n="step3">Step 3 of 9</div>
      <h2 data-i18n="s3_title">What's happening in your life?</h2>
      <p class="slide-desc" data-i18n="s3_desc">Select all that apply. This shapes what we focus on.</p>
      <div class="multi-wrap" data-field="focus" data-multi="true">
        <div class="multi-option" data-value="career"><span>ğŸ’¼</span> <span data-i18n="s3_career">Career & work</span></div>
        <div class="multi-option" data-value="love"><span>â¤ï¸</span> <span data-i18n="s3_love">Love & relationships</span></div>
        <div class="multi-option" data-value="growth"><span>ğŸŒ±</span> <span data-i18n="s3_growth">Personal growth</span></div>
        <div class="multi-option" data-value="money"><span>ğŸ’°</span> <span data-i18n="s3_money">Money & stability</span></div>
        <div class="multi-option" data-value="family"><span>ğŸ </span> <span data-i18n="s3_family">Home & family</span></div>
        <div class="multi-option" data-value="adventure"><span>âœˆï¸</span> <span data-i18n="s3_adventure">Adventure & travel</span></div>
        <div class="multi-option" data-value="health"><span>ğŸ§˜</span> <span data-i18n="s3_health">Health & wellness</span></div>
        <div class="multi-option" data-value="creativity"><span>ğŸ¨</span> <span data-i18n="s3_creativity">Creativity</span></div>
      </div>
      <button class="btn-next" onclick="nextSlide()" data-i18n-btn="next">Continue â†’</button>
      <br><button class="btn-back" onclick="prevSlide()" data-i18n-btn="back">â† Back</button>
    </div>

    <!-- Slide 4: Relationship -->
    <div class="slide" data-slide="4">
      <div class="slide-number" data-i18n="step4">Step 4 of 9</div>
      <h2 data-i18n="s4_title">Relationship status?</h2>
      <p class="slide-desc" data-i18n="s4_desc">Helps us frame Venus and Mars transits for you.</p>
      <div class="options" data-field="relationship">
        <div class="option" data-value="single">
          <span class="option-icon">ğŸ¦‹</span>
          <div class="option-text"><div class="option-label" data-i18n="s4_single">Single</div></div>
        </div>
        <div class="option" data-value="dating">
          <span class="option-icon">ğŸ’«</span>
          <div class="option-text"><div class="option-label" data-i18n="s4_dating">Dating</div></div>
        </div>
        <div class="option" data-value="relationship">
          <span class="option-icon">â¤ï¸</span>
          <div class="option-text"><div class="option-label" data-i18n="s4_relationship">In a relationship</div></div>
        </div>
        <div class="option" data-value="complicated">
          <span class="option-icon">ğŸŒ€</span>
          <div class="option-text"><div class="option-label" data-i18n="s4_complicated">It's complicated</div></div>
        </div>
      </div>
    </div>

    <!-- Slide 5: Time preference -->
    <div class="slide" data-slide="5">
      <div class="slide-number" data-i18n="step5">Step 5 of 9</div>
      <h2 data-i18n="s5_title">When do you read your horoscope?</h2>
      <p class="slide-desc" data-i18n="s5_desc">We'll time the delivery just right.</p>
      <div class="options" data-field="read_time">
        <div class="option" data-value="morning">
          <span class="option-icon">â˜€ï¸</span>
          <div class="option-text"><div class="option-label" data-i18n="s5_morning">Morning â€” with my coffee</div></div>
        </div>
        <div class="option" data-value="evening">
          <span class="option-icon">ğŸŒ™</span>
          <div class="option-text"><div class="option-label" data-i18n="s5_evening">Evening â€” before bed</div></div>
        </div>
        <div class="option" data-value="whenever">
          <span class="option-icon">ğŸŒŸ</span>
          <div class="option-text"><div class="option-label" data-i18n="s5_whenever">Whenever â€” I'll check when I check</div></div>
        </div>
      </div>
    </div>

    <!-- Slide 6: Birth info -->
    <div class="slide" data-slide="6">
      <div class="slide-number" data-i18n="step6">Step 6 of 9</div>
      <h2 data-i18n="s6_title">When and where were you born?</h2>
      <p class="slide-desc" data-i18n="s6_desc">We need this to calculate your real natal chart â€” not a generic horoscope.</p>
      
      <div class="form-row">
        <div class="form-group">
          <label data-i18n="s6_birthday">Birthday</label>
          <input type="date" id="q-birthday" required>
        </div>
        <div class="form-group">
          <label data-i18n="s6_time">Birth time <span style="color:#555">(optional)</span></label>
          <input type="time" id="q-time">
        </div>
      </div>
      <div class="form-group">
        <label data-i18n="s6_city">Birth city</label>
        <input type="text" id="q-city" placeholder="Vilnius" required>
      </div>

      <button class="btn-next" onclick="validateBirth() && nextSlide()" data-i18n-btn="next">Continue â†’</button>
      <br><button class="btn-back" onclick="prevSlide()" data-i18n-btn="back">â† Back</button>
    </div>

    <!-- Slide 7: Gender -->
    <div class="slide" data-slide="7">
      <div class="slide-number" data-i18n="step7">Step 7 of 9</div>
      <h2 data-i18n="s7g_title">How do you identify?</h2>
      <p class="slide-desc" data-i18n="s7g_desc">Helps us personalize the language in your readings.</p>
      <div class="options" data-field="gender">
        <div class="option" data-value="female">
          <span class="option-icon">â™€ï¸</span>
          <div class="option-text"><div class="option-label" data-i18n="s7g_female">Female</div></div>
        </div>
        <div class="option" data-value="male">
          <span class="option-icon">â™‚ï¸</span>
          <div class="option-text"><div class="option-label" data-i18n="s7g_male">Male</div></div>
        </div>
        <div class="option" data-value="nonbinary">
          <span class="option-icon">âš§ï¸</span>
          <div class="option-text"><div class="option-label" data-i18n="s7g_nonbinary">Non-binary</div></div>
        </div>
        <div class="option" data-value="skip">
          <span class="option-icon">ğŸŒŸ</span>
          <div class="option-text"><div class="option-label" data-i18n="s7g_skip">Prefer not to say</div></div>
        </div>
      </div>
    </div>

    <!-- Slide 8: Signup (name + email) -->
    <div class="slide" data-slide="8">
      <div class="slide-number" data-i18n="step8">Step 8 of 9</div>
      <h2 data-i18n="s8_title">Where should we send your reading?</h2>
      <p class="slide-desc" data-i18n="s8_desc">Your first personalized cosmic reading is waiting.</p>
      
      <div class="form-group">
        <label data-i18n="s8_name">Your name</label>
        <input type="text" id="q-name" placeholder="First name" required>
      </div>
      <div class="form-group">
        <label data-i18n="s8_email">Email</label>
        <input type="email" id="q-email" placeholder="you@email.com" required>
      </div>

      <button class="btn-next" id="signup-btn" onclick="submitQuiz()" data-i18n-btn="see_plan">See my cosmic plan âœ¨</button>
      <br><button class="btn-back" onclick="prevSlide()" data-i18n-btn="back">â† Back</button>
    </div>

    <!-- Slide 9: Paywall -->
    <div class="slide" data-slide="9">
      <div class="slide-number" data-i18n="step9">Step 9 of 9</div>
      <h2 data-i18n="s9_title">Your cosmic profile is ready!</h2>
      <p class="slide-desc" data-i18n="s9_desc">Choose how you want to experience GATO.</p>

      <div class="plan-cards">
        <div class="plan-card plan-free" onclick="choosePlan('free')">
          <div class="plan-price" data-i18n="s7_free_price">Free<br><small data-i18n="s7_free_sub">forever</small></div>
          <div class="plan-features">
            <div class="has">âœ“ <span data-i18n="s7_f1">Daily reading</span></div>
            <div class="has">âœ“ <span data-i18n="s7_f2">Natal chart</span></div>
            <div class="has">âœ“ <span data-i18n="s7_f3">Numerology</span></div>
            <div class="no">âœ— <span data-i18n="s7_f4">Custom style</span></div>
            <div class="no">âœ— <span data-i18n="s7_f5">Weekly deep dive</span></div>
            <div class="no">âœ— <span data-i18n="s7_f6">Chat with GATO</span></div>
          </div>
          <button class="btn-next" style="background: rgba(255,255,255,0.1); margin-top: 16px; padding: 10px 24px; font-size: 0.9em;" data-i18n-btn="start_free">Start free</button>
        </div>

        <div class="plan-card plan-premium" onclick="choosePlan('premium')">
          <div class="plan-badge" data-i18n="s7_badge">POPULAR</div>
          <div class="plan-price">â‚¬7.99<br><small data-i18n="s7_prem_sub">/month</small></div>
          <div class="plan-features">
            <div class="has">âœ“ <span data-i18n="s7_p1">Everything in Free</span></div>
            <div class="has">âœ“ <span data-i18n="s7_p2">Your chosen style</span></div>
            <div class="has">âœ“ <span data-i18n="s7_p3">Weekly deep dive</span></div>
            <div class="has">âœ“ <span data-i18n="s7_p4">Chat with GATO</span></div>
            <div class="has">âœ“ <span data-i18n="s7_p5">Compatibility readings</span></div>
            <div class="has">âœ“ <span data-i18n="s7_p6">Transit alerts</span></div>
          </div>
          <button class="btn-next" style="margin-top: 16px; padding: 10px 24px; font-size: 0.9em;" data-i18n-btn="go_premium">Go Premium âœ¨</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // State
    let current = 1;
    const total = 9;
    const answers = {};
    let lang = 'en';
    let signupToken = null;

    // i18n
    const lt = {
      step: 'Å½ingsnis 1 iÅ¡ 9', step2: 'Å½ingsnis 2 iÅ¡ 9', step3: 'Å½ingsnis 3 iÅ¡ 9',
      step4: 'Å½ingsnis 4 iÅ¡ 9', step5: 'Å½ingsnis 5 iÅ¡ 9', step6: 'Å½ingsnis 6 iÅ¡ 9',
      step7: 'Å½ingsnis 7 iÅ¡ 9', step8: 'Å½ingsnis 8 iÅ¡ 9', step9: 'Å½ingsnis 9 iÅ¡ 9',
      s1_title: 'Kaip turÄ—tÅ³ skambÄ—ti tavo skaitymai?',
      s1_desc: 'Pasirink balsÄ…, kuris tau artimas.',
      s1_mystic: 'Mistinis ir poetiÅ¡kas',
      s1_mystic_ex: '"MÄ—nulis Å¡nabÅ¾da per tavo septintus namus, atverdamas duris, kurias manei uÅ¾rakintas..."',
      s1_practical: 'PraktiÅ¡kas ir dalykiÅ¡kas',
      s1_practical_ex: '"Marsas trinu su tavo Jupiteriu â€” gera diena dideliems sprendimams. PasitikÄ—k intuicija karjeros klausimais."',
      s1_casual: 'DraugiÅ¡kas ir laisvas',
      s1_casual_ex: '"Ei! Venera Å¡iandien gerai dera su tavo Å¾emÄ—lapiu â€” puikus metas paraÅ¡yti tam Å¾mogui, apie kurÄ¯ galvojai."',
      s1_direct: 'Tiesus ir drÄ…sus',
      s1_direct_ex: '"Saturnas kvadrate su tavo Saule. Nustok vilkinti. Tas sunkus pokalbis? TurÄ—k jÄ¯ Å¡iandien."',
      s2_title: 'Kaip giliai nardysime?',
      s2_desc: 'Pasirink idealÅ³ skaitymo ilgÄ¯.',
      s2_short: 'Trumpas gurkÅ¡nis', s2_short_ex: '2â€“3 sakiniai. Tik kosminÄ— antraÅ¡tÄ—.',
      s2_medium: 'Rytinis skaitymas', s2_medium_ex: 'Solidi pastraipa su kontekstu ir patarimais.',
      s2_long: 'Gilusis nardymas', s2_long_ex: 'Detali analizÄ— su planetÅ³ aspektais ir praktinÄ—mis Ä¯Å¾valgomis.',
      s3_title: 'Kas vyksta tavo gyvenime?',
      s3_desc: 'PaÅ¾ymÄ—k viskÄ…, kas tinka. Tai nulems, kur fokusuosimÄ—s.',
      s3_career: 'Karjera ir darbas', s3_love: 'MeilÄ— ir santykiai', s3_growth: 'Asmeninis augimas',
      s3_money: 'Pinigai ir stabilumas', s3_family: 'Namai ir Å¡eima', s3_adventure: 'Nuotykiai ir kelionÄ—s',
      s3_health: 'Sveikata', s3_creativity: 'KÅ«rybiÅ¡kumas',
      s4_title: 'SantykiÅ³ statusas?',
      s4_desc: 'Padeda suformuoti Veneros ir Marso tranzitÅ³ interpretacijas.',
      s4_single: 'Vienas/viena', s4_dating: 'SusitinkinÄ—ju', s4_relationship: 'Santykiuose', s4_complicated: 'SudÄ—tinga',
      s5_title: 'Kada skaitai savo horoskopÄ…?',
      s5_desc: 'Parinkime tinkamÄ… laikÄ….',
      s5_morning: 'Ryte â€” su kava', s5_evening: 'Vakare â€” prieÅ¡ miegÄ…', s5_whenever: 'Kada pasitaiko',
      s6_title: 'Kada ir kur gimei?',
      s6_desc: 'Mums reikia tavo gimimo duomenÅ³ tikram gimimo Å¾emÄ—lapiui apskaiÄiuoti.',
      s6_birthday: 'Gimtadienis', s6_city: 'Gimimo miestas',
      s6_time: 'Gimimo laikas <span style="color:#555">(neprivaloma)</span>',
      s7g_title: 'Kaip save identifikuoji?',
      s7g_desc: 'Padeda personalizuoti kalbÄ… tavo skaitymuose.',
      s7g_female: 'Moteris', s7g_male: 'Vyras', s7g_nonbinary: 'Nebinarinis', s7g_skip: 'Nenoriu atsakyti',
      s8_title: 'Kur siÅ³sti tavo skaitymÄ…?',
      s8_desc: 'Tavo pirmasis asmeninis kosminis skaitymas jau laukia.',
      s8_name: 'Tavo vardas', s8_email: 'El. paÅ¡tas',
      s9_title: 'Tavo kosminis profilis paruoÅ¡tas!',
      s9_desc: 'Pasirink, kaip nori patirti GATO.',
      s7_free_price: 'Nemokama', s7_free_sub: 'visam laikui', s7_prem_sub: '/mÄ—n.',
      s7_badge: 'POPULIARU',
      s7_f1: 'Kasdieninis skaitymas', s7_f2: 'Gimimo Å¾emÄ—lapis', s7_f3: 'Numerologija',
      s7_f4: 'Pasirinktas stilius', s7_f5: 'Savaitinis giluminis skaitymas', s7_f6: 'Pokalbis su GATO',
      s7_p1: 'Viskas, kas Nemokama', s7_p2: 'Tavo pasirinktas stilius', s7_p3: 'Savaitinis giluminis skaitymas',
      s7_p4: 'Pokalbis su GATO', s7_p5: 'Suderinamumo skaitymai', s7_p6: 'TranzitÅ³ Ä¯spÄ—jimai',
    };
    const ltBtns = {
      next: 'TÄ™sti â†’', back: 'â† Atgal', see_plan: 'Pamatyti mano kosminÄ¯ planÄ… âœ¨',
      start_free: 'PradÄ—ti nemokamai', go_premium: 'Pasirinkti Premium âœ¨',
    };

    function setLang(l) {
      lang = l;
      document.querySelectorAll('.lang-btn').forEach(b => b.classList.toggle('active', b.textContent.trim() === l.toUpperCase()));
      if (l === 'lt') {
        document.querySelectorAll('[data-i18n]').forEach(el => {
          const key = el.getAttribute('data-i18n');
          if (lt[key]) el.innerHTML = lt[key];
        });
        document.querySelectorAll('[data-i18n-btn]').forEach(el => {
          const key = el.getAttribute('data-i18n-btn');
          if (ltBtns[key]) el.textContent = ltBtns[key];
        });
      } else {
        location.reload(); // Simplest way to reset to EN
      }
    }

    // Check URL for lang
    const urlLang = new URLSearchParams(window.location.search).get('lang');
    if (urlLang === 'lt') setLang('lt');

    // Navigation
    function showSlide(n) {
      const prev = document.querySelector('.slide.active');
      const next = document.querySelector(`[data-slide="${n}"]`);
      if (!next || next === prev) return;

      const goingForward = n > current;
      prev.classList.remove('active');
      prev.classList.add('exit-left');
      setTimeout(() => prev.classList.remove('exit-left'), 400);

      next.classList.add('active');
      current = n;
      document.getElementById('progress').style.width = ((n / total) * 100) + '%';
    }

    function nextSlide() { if (current < total) showSlide(current + 1); }
    function prevSlide() { if (current > 1) showSlide(current - 1); }

    // Single-select options (auto-advance)
    document.querySelectorAll('.options').forEach(group => {
      const field = group.getAttribute('data-field');
      group.querySelectorAll('.option').forEach(opt => {
        opt.addEventListener('click', () => {
          group.querySelectorAll('.option').forEach(o => o.classList.remove('selected'));
          opt.classList.add('selected');
          answers[field] = opt.getAttribute('data-value');
          // Auto-advance after 300ms
          setTimeout(() => {
            if (current < total) showSlide(current + 1);
          }, 300);
        });
      });
    });

    // Multi-select options
    document.querySelectorAll('.multi-wrap').forEach(group => {
      const field = group.getAttribute('data-field');
      answers[field] = [];
      group.querySelectorAll('.multi-option').forEach(opt => {
        opt.addEventListener('click', () => {
          opt.classList.toggle('selected');
          const val = opt.getAttribute('data-value');
          if (opt.classList.contains('selected')) {
            answers[field].push(val);
          } else {
            answers[field] = answers[field].filter(v => v !== val);
          }
        });
      });
    });

    // Validate birth info (slide 6)
    function validateBirth() {
      const birthday = document.getElementById('q-birthday').value;
      const city = document.getElementById('q-city').value.trim();
      if (!birthday || !city) {
        alert(lang === 'lt' ? 'PraÅ¡ome Ä¯vesti gimtadienÄ¯ ir miestÄ….' : 'Please enter your birthday and birth city.');
        return false;
      }
      return true;
    }

    // Submit quiz (signup)
    async function submitQuiz() {
      const name = document.getElementById('q-name').value.trim();
      const email = document.getElementById('q-email').value.trim();
      const birthday = document.getElementById('q-birthday').value;
      const city = document.getElementById('q-city').value.trim();
      const time = document.getElementById('q-time').value;

      if (!name || !email) {
        alert(lang === 'lt' ? 'PraÅ¡ome Ä¯vesti vardÄ… ir el. paÅ¡tÄ….' : 'Please enter your name and email.');
        return;
      }

      const btn = document.getElementById('signup-btn');
      btn.disabled = true;
      btn.textContent = lang === 'lt' ? 'SkaiÄiuojame...' : 'Calculating...';

      try {
        const res = await fetch('/subscribe', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            name,
            email,
            birth_date: birthday,
            birth_city: city,
            birth_time: time || undefined,
            language: lang,
            focus_area: (answers.focus || []).join(','),
            gender: answers.gender,
            quiz_style: answers.style,
            quiz_length: answers.length,
            quiz_relationship: answers.relationship,
            quiz_read_time: answers.read_time,
          }),
        });
        const data = await res.json();
        if (data.token) {
          signupToken = data.token;
          showSlide(9);
        } else if (data.error) {
          alert(data.error);
          btn.disabled = false;
          btn.textContent = lang === 'lt' ? 'Pamatyti mano kosminÄ¯ planÄ… âœ¨' : 'See my cosmic plan âœ¨';
        }
      } catch (e) {
        alert(lang === 'lt' ? 'KaÅ¾kas nutiko. Bandykite dar kartÄ….' : 'Something went wrong. Please try again.');
        btn.disabled = false;
        btn.textContent = lang === 'lt' ? 'Pamatyti mano kosminÄ¯ planÄ… âœ¨' : 'See my cosmic plan âœ¨';
      }
    }

    // Plan selection
    async function choosePlan(plan) {
      if (plan === 'free') {
        // Go to welcome/progress page
        window.location.href = '/welcome/' + signupToken + '?lang=' + lang;
      } else {
        // Create checkout and redirect
        try {
          const res = await fetch('/checkout', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ token: signupToken }),
          });
          const data = await res.json();
          if (data.checkout_url) {
            window.location.href = data.checkout_url;
          } else {
            alert('Could not create checkout. Starting free instead.');
            window.location.href = '/welcome/' + signupToken + '?lang=' + lang;
          }
        } catch (e) {
          window.location.href = '/welcome/' + signupToken + '?lang=' + lang;
        }
      }
    }
  </script>
</body>
</html>
